#include "stdafx.h"
#include <windows.h>
#include <stdio.h>

int main(void)
{
	unsigned char array[57] = { 0x55, 0x8B, 0xEC, 0x83, 0xEC, 0x08, 0xC7, 0x45, 0xF8, 0x00, 0x00, 0x00, 0x00, 0xC7, 0x45, 0xFC, 0x01, 0x00, 0x00,
		0x00, 0xEB, 0x09, 0x8B, 0x45, 0xFC, 0x83, 0xC0, 0x01, 0x89, 0x45, 0xFC, 0x8B, 0x4D, 0xFC, 0x3B, 0x4D, 0x08, 0x7F,
		0x0B, 0x8B, 0x55, 0xF8, 0x03, 0x55, 0xFC, 0x89, 0x55, 0xF8, 0xEB, 0xE4, 0x8B, 0x45, 0xF8, 0x8B, 0xE5, 0x5D, 0xC3 };
	int x;
	DWORD oldp;

	VirtualProtect(array, sizeof(array), 0x40, &oldp);
	x = ((int(*)(char))&array)(100); //Array de fapt e o functie scrisa asa. Face param*(param+1)/2. E scrisa in asm 
	VirtualProtect(array, sizeof(array), oldp, &oldp);

	printf("rezultatul este: [%d]\n", x);

	return 0;
}